<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>
<head>
<title>Secret service CL API
</title>
<link type='text/css' href='style.css' rel='stylesheet'>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width">
   <script src="jquery.min.js"></script>
<script src="toc.min.js"></script>
<script type="text/x-mathjax-config">
     MathJax.Hub.Config({
       tex2jax: {
         inlineMath: [['$','$']],
         processEscapes: true
       }
     });
   </script>
   <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
   </script>
   
</head>
<body>
<div id="content-container">
<div id="toc">
<div id="page-toc">
</div>
<div id="toc-footer"><ul><li><a href="https://github.com/melisgl/mgl-pax">[generated by MGL-PAX]</a></li></ul></div>
</div>
<div id="content">
<p><a id="x-28SECRET-SERVICE-3A-40INDEX-20MGL-PAX-3ASECTION-29"></a>
<a id="SECRET-SERVICE:@INDEX%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="index.html" title="Secret service CL API">&#8634;</a></span></span></p>

<h1><a href="index.html">Secret service CL API</a></h1>

<h6>[in package SECRET-SERVICE]</h6>

<p>This is a partial interface to the Secret Service API in Common Lisp. Secret
service is an API to store keys and passwords in a dedicated service; both Gnome
and KDE provide such service (gnome-keyring).</p>

<p>It allows one to offload caring about how to safely store passwords and keys for
CL projects to someone else.</p>

<p>Simple usage:</p>

<pre><code><span class="code">  <span class="paren1">(<span class="code">find-the-secret '<span class="paren2">(<span class="code"><span class="paren3">(<span class="code"><span class="string">"machine"</span> <span class="string">"example.com"</span></span>)</span></span>)</span></span>)</span></span></code></pre>

<p>would return password for the secret with parameter machine having provided value, if there is only one, prompting for password if necessary.</p>

<p><a id="x-28SECRET-SERVICE-3AFIND-ALL-SECRETS-20FUNCTION-29"></a>
<a id="SECRET-SERVICE:FIND-ALL-SECRETS%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type">[function]</span> <span class="reference-object"><a href="#SECRET-SERVICE:FIND-ALL-SECRETS%20FUNCTION" >FIND-ALL-SECRETS</a></span></span> <span class="locative-args">PARS</span></span></p>

<p>Find all secrets with attributes in <code>PARS</code>.  Returns a list of
match pairs (path secret). See secret structure for the second item format.</p>

<p>E.g.,</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">find-all-secrets '<span class="paren2">(<span class="code"><span class="paren3">(<span class="code"><span class="string">"machine"</span> <span class="string">"example.com"</span></span>)</span></span>)</span></span>)</span></span></code></pre></li>
</ul>

<p><a id="x-28SECRET-SERVICE-3ASTRINGIFY-SECRET-20FUNCTION-29"></a>
<a id="SECRET-SERVICE:STRINGIFY-SECRET%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type">[function]</span> <span class="reference-object"><a href="#SECRET-SERVICE:STRINGIFY-SECRET%20FUNCTION" >STRINGIFY-SECRET</a></span></span> <span class="locative-args">SECRET</span></span></p>

<p>Turn secret structure returned by D-Bus to a secret string</p></li>
</ul>

<p><a id="x-28SECRET-SERVICE-3AGET-SECRET-ITEM-ATTRIBUTES-20FUNCTION-29"></a>
<a id="SECRET-SERVICE:GET-SECRET-ITEM-ATTRIBUTES%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type">[function]</span> <span class="reference-object"><a href="#SECRET-SERVICE:GET-SECRET-ITEM-ATTRIBUTES%20FUNCTION" >GET-SECRET-ITEM-ATTRIBUTES</a></span></span> <span class="locative-args">ITEM-PATH</span></span></p>

<p>An alist of all item attributes. The cars of each item is a keyword.</p></li>
</ul>

<p><a id="x-28SECRET-SERVICE-3AGET-SECRET-ITEM-ATTRIBUTE-20FUNCTION-29"></a>
<a id="SECRET-SERVICE:GET-SECRET-ITEM-ATTRIBUTE%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type">[function]</span> <span class="reference-object"><a href="#SECRET-SERVICE:GET-SECRET-ITEM-ATTRIBUTE%20FUNCTION" >GET-SECRET-ITEM-ATTRIBUTE</a></span></span> <span class="locative-args">ITEM LABEL</span></span></p>

<p>Get attribute of a secret item</p></li>
</ul>

<p><a id="x-28SECRET-SERVICE-3AGET-SECRET-ITEM-PROPERTY-20FUNCTION-29"></a>
<a id="SECRET-SERVICE:GET-SECRET-ITEM-PROPERTY%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type">[function]</span> <span class="reference-object"><a href="#SECRET-SERVICE:GET-SECRET-ITEM-PROPERTY%20FUNCTION" >GET-SECRET-ITEM-PROPERTY</a></span></span> <span class="locative-args">ITEM-PATH LABEL</span></span></p>

<p>Get attribute <code>LABEL</code> of secret item with path <code>ITEM-PATH</code>.</p></li>
</ul>

<p><a id="x-28SECRET-SERVICE-3ASECRET-ITEM-SEARCH-ERROR-20CONDITION-29"></a>
<a id="SECRET-SERVICE:SECRET-ITEM-SEARCH-ERROR%20CONDITION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type">[condition]</span> <span class="reference-object"><a href="#SECRET-SERVICE:SECRET-ITEM-SEARCH-ERROR%20CONDITION" >SECRET-ITEM-SEARCH-ERROR</a></span></span> <span class="locative-args"><a href="http://www.lispworks.com/documentation/HyperSpec/Body/e_error.htm" title="ERROR (MGL-PAX:CLHS CONDITION)">ERROR</a></span></span></li>
</ul>

<p><a id="x-28SECRET-SERVICE-3AGET-COLLECTIONS-LIST-20FUNCTION-29"></a>
<a id="SECRET-SERVICE:GET-COLLECTIONS-LIST%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type">[function]</span> <span class="reference-object"><a href="#SECRET-SERVICE:GET-COLLECTIONS-LIST%20FUNCTION" >GET-COLLECTIONS-LIST</a></span></span></span></li>
</ul>

<p><a id="x-28SECRET-SERVICE-3AFIND-COLLECTION-BY-NAME-20FUNCTION-29"></a>
<a id="SECRET-SERVICE:FIND-COLLECTION-BY-NAME%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type">[function]</span> <span class="reference-object"><a href="#SECRET-SERVICE:FIND-COLLECTION-BY-NAME%20FUNCTION" >FIND-COLLECTION-BY-NAME</a></span></span> <span class="locative-args">NAME</span></span></p>

<p>Find path to collection with label or alias <code>NAME</code>.</p></li>
</ul>

<p><a id="x-28SECRET-SERVICE-3AGET-COLLECTION-BY-ALIAS-20FUNCTION-29"></a>
<a id="SECRET-SERVICE:GET-COLLECTION-BY-ALIAS%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type">[function]</span> <span class="reference-object"><a href="#SECRET-SERVICE:GET-COLLECTION-BY-ALIAS%20FUNCTION" >GET-COLLECTION-BY-ALIAS</a></span></span> <span class="locative-args">NAME</span></span></p>

<p>Get collection path by alias name, or nil. There is one predefined alias, &quot;session&quot;. </p></li>
</ul>

<p><a id="x-28SECRET-SERVICE-3AGET-COLLECTION-ATTRIBUTES-20FUNCTION-29"></a>
<a id="SECRET-SERVICE:GET-COLLECTION-ATTRIBUTES%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type">[function]</span> <span class="reference-object"><a href="#SECRET-SERVICE:GET-COLLECTION-ATTRIBUTES%20FUNCTION" >GET-COLLECTION-ATTRIBUTES</a></span></span> <span class="locative-args">COLLECTION-PATH</span></span></li>
</ul>

<p><a id="x-28SECRET-SERVICE-3AFIND-THE-SECRET-20FUNCTION-29"></a>
<a id="SECRET-SERVICE:FIND-THE-SECRET%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type">[function]</span> <span class="reference-object"><a href="#SECRET-SERVICE:FIND-THE-SECRET%20FUNCTION" >FIND-THE-SECRET</a></span></span> <span class="locative-args">PARS</span></span></p>

<p>Make sure that there is just one secret matching pars, and return it.
Raise error otherwise, or when the secret needs to be unlocked.</p></li>
</ul>

<p><a id="x-28SECRET-SERVICE-3ACREATE-ITEM-20FUNCTION-29"></a>
<a id="SECRET-SERVICE:CREATE-ITEM%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type">[function]</span> <span class="reference-object"><a href="#SECRET-SERVICE:CREATE-ITEM%20FUNCTION" >CREATE-ITEM</a></span></span> <span class="locative-args">COLLECTION-PATH LABEL DICT SECRET &amp;KEY REPLACE (CONTENT-TYPE &quot;text/plain&quot;)</span></span></p>

<p>Create an item.</p>

<p>Collection-path is a path to the collection (e.g.,&quot;/org/freedesktop/secrets/collection/login&quot;, <code>LABEL</code> name, <code>DICT</code> alist of attributes (all atoms strings), and <code>SECRET</code> the secret to store.</p></li>
</ul>

<p><a id="x-28SECRET-SERVICE-3ADELETE-SECRET-20FUNCTION-29"></a>
<a id="SECRET-SERVICE:DELETE-SECRET%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type">[function]</span> <span class="reference-object"><a href="#SECRET-SERVICE:DELETE-SECRET%20FUNCTION" >DELETE-SECRET</a></span></span> <span class="locative-args">PATH</span></span></li>
</ul>
  </div>
</div>
<script>$('#page-toc').toc({'selectors': 'h1,h2,h3,h4'});</script>
</body>
</html>
